---
import { SHOW_DOWNLOAD_CV } from 'astro:env/server'
import { getRelativeLocaleUrl } from 'astro:i18n'
import AstroIcon from '@assets/icons/Astro.svg'
import Credly from '@assets/icons/Credly.svg'
import Email from '@assets/icons/Email.svg'
import GitHub from '@assets/icons/GitHub.svg'
import LinkedIn from '@assets/icons/LinkedIn.svg'
import { defaultLocale, useTranslations } from '@lib/i18n'

const { locale } = Astro.params
const currentLocale = locale ?? defaultLocale
const t = useTranslations(locale)
---

<footer class="bg-background border-t">
  <div class="container py-8 md:py-12">
    <div class="grid grid-cols-2 gap-8 md:grid-cols-4">
      <div class="col-span-2">
        <a href={getRelativeLocaleUrl(currentLocale, '/')} class="text-xl font-bold tracking-tight">
          {t('name')}
        </a>
        <p class="text-muted-foreground mt-2 max-w-md text-sm">
          {t('footer.description')}
        </p>
        <div class="mt-4 flex space-x-4">
          <a
            href="https://www.linkedin.com/in/hotdogee/"
            target="_blank"
            rel="noopener noreferrer"
            class="hover:bg-accent hover:text-accent-foreground focus-visible:ring-ring inline-flex h-10 w-10 items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:ring-1 focus-visible:outline-none disabled:pointer-events-none disabled:opacity-50"
          >
            <LinkedIn class="size-6" />
            <span class="sr-only">LinkedIn</span>
          </a>
          <a
            href="https://www.credly.com/users/hanlin"
            target="_blank"
            rel="noopener noreferrer"
            class="hover:bg-accent hover:text-accent-foreground focus-visible:ring-ring inline-flex h-10 w-10 items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:ring-1 focus-visible:outline-none disabled:pointer-events-none disabled:opacity-50"
          >
            <Credly class="size-6" />
            <span class="sr-only">Credly</span>
          </a>
          <a
            href="https://github.com/hotdogee"
            target="_blank"
            rel="noopener noreferrer"
            class="hover:bg-accent hover:text-accent-foreground focus-visible:ring-ring inline-flex h-10 w-10 items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:ring-1 focus-visible:outline-none disabled:pointer-events-none disabled:opacity-50"
          >
            <GitHub class="size-6" />
            <span class="sr-only">GitHub</span>
          </a>
          <a
            href="mailto:hanlin@ntu.edu.tw"
            class="hover:bg-accent hover:text-accent-foreground focus-visible:ring-ring inline-flex h-10 w-10 items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:ring-1 focus-visible:outline-none disabled:pointer-events-none disabled:opacity-50"
          >
            <Email class="size-6" />
            <span class="sr-only">Email</span>
          </a>
        </div>
      </div>

      <div class="max-md:hidden">
        <ul class="mt-4 space-y-2 text-sm">
          <li>
            <a href={getRelativeLocaleUrl(currentLocale, '/')} class="hover:text-primary">
              {t('nav.home')}
            </a>
          </li>
          <li>
            <a href={getRelativeLocaleUrl(currentLocale, '/about')} class="hover:text-primary">
              {t('nav.about')}
            </a>
          </li>
          <li>
            <a href={getRelativeLocaleUrl(currentLocale, '/projects')} class="hover:text-primary">
              {t('nav.projects')}
            </a>
          </li>
          <li>
            <a href={getRelativeLocaleUrl(currentLocale, '/experience')} class="hover:text-primary">
              {t('nav.experience')}
            </a>
          </li>
        </ul>
      </div>

      <div class="max-md:hidden">
        <ul class="mt-4 space-y-2 text-sm">
          <li>
            <a href={getRelativeLocaleUrl(currentLocale, '/expertise')} class="hover:text-primary">
              {t('nav.expertise')}
            </a>
          </li>
          <li>
            <a href={getRelativeLocaleUrl(currentLocale, '/research')} class="hover:text-primary">
              {t('nav.research')}
            </a>
          </li>
          <li>
            <a href={getRelativeLocaleUrl(currentLocale, '/contact')} class="hover:text-primary">
              {t('nav.contact')}
            </a>
          </li>
          <li>
            {
              SHOW_DOWNLOAD_CV && (
                <a
                  target="_blank"
                  href="/hanlin-cv-long-form.pdf"
                  class="text-primary inline-flex h-auto p-0 underline-offset-4 hover:underline"
                >
                  {t('button.download')}
                </a>
              )
            }
          </li>
        </ul>
      </div>
    </div>

    <div class="mt-8 flex items-center justify-between border-t pt-8">
      <a href="https://www.hanl.in/" class="hover:text-accent text-muted-foreground text-xs"
        >{t('footer.copyright')}</a
      >
      <p class="text-muted-foreground text-xs">
        Built with
        <a
          href="https://astro.build"
          target="_blank"
          rel="noopener noreferrer"
          class="hover:text-accent"
        >
          Astro <AstroIcon class="inline size-3" />
        </a>
      </p>
    </div>
  </div>
</footer>
